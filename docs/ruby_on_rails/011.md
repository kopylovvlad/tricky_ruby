# How to share data between class and instance

The easiest way to share data between class and class instances is using ActiveRecord's method [class_attribute](https://apidock.com/rails/Class/class_attribute).

It allows you to declare a class-level attribute whose value is inheritable by subclasses. Subclasses can change their own value and it will not impact parent class. For example:

```ruby
require 'active_support/core_ext/class/attribute.rb'

# Step 1: declare a class record and implement class_attribute :fields.
# We will use it to declare attr_accessor
class Record
  class_attribute :fields
  self.fields = [:id]

  def self.attribute(new_field_name)
    self.fields = fields | [new_field_name]

    instance_eval do
      attr_accessor new_field_name
    end
  end
end

# Step 2: Declare class Topic with two attributes
class Topic < Record
  attribute :title
  attribute :body
end

# Step 3: Declare another class user with other two attributes
# And one more class with addition attribute
class User < Record
  attribute :first_name
  attribute :last_name
end

class Admin < User
  attribute :role
end

# Step 4: Let's check.
# Each class has it own attributes and data shared between class and instances
puts Topic.fields.inspect
# [:id, :title, :body]
puts Topic.new.fields.inspect
# [:id, :title, :body]

puts User.fields.inspect
# [:id, :first_name, :last_name]
puts User.new.fields.inspect
# [:id, :first_name, :last_name]

puts Admin.fields.inspect
# [:id, :first_name, :last_name, :role]
puts Admin.new.fields.inspect
# [:id, :first_name, :last_name, :role]
```
